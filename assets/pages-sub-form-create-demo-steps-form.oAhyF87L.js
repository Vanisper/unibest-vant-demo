var M=Object.defineProperty;var R=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var q=(r,t,e)=>t in r?M(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,$=(r,t)=>{for(var e in t||(t={}))W.call(t,e)&&q(r,e,t[e]);if(R)for(var e of R(t))Z.call(t,e)&&q(r,e,t[e]);return r};var D=(r,t,e)=>new Promise((f,o)=>{var c=v=>{try{g(e.next(v))}catch(m){o(m)}},_=v=>{try{g(e.throw(v))}catch(m){o(m)}},g=v=>v.done?f(v.value):Promise.resolve(v.value).then(c,_);g((e=e.apply(r,t)).next())});import{d as V,Z as B,$ as G,a0 as T,a1 as H,h as n,a2 as Q,E,a3 as X,a4 as I,a5 as j,r as P,a6 as ee,U,c as x,f as S,i as L,w as i,u as a,s as te,a7 as ae,k as b,t as C,F as le,a8 as F,a9 as N,Y as A,q as ne,B as z,T as ie,C as se,a as re}from"./index-Cd1M-BUL.js";import{a as oe,h as ce}from"./handle.rMX7sRxW.js";const[Y,O]=T("steps"),ue={active:G(0),direction:B("horizontal"),activeIcon:B("checked"),iconPrefix:String,finishIcon:String,activeColor:String,inactiveIcon:String,inactiveColor:String},J=Symbol(Y);var pe=V({name:Y,props:ue,emits:["clickStep"],setup(r,{emit:t,slots:e}){const{linkChildren:f}=H(J);return f({props:r,onClickStep:c=>t("clickStep",c)}),()=>{var c;return n("div",{class:O([r.direction])},[n("div",{class:O("items")},[(c=e.default)==null?void 0:c.call(e)])])}}});const[de,y]=T("step");var fe=V({name:de,setup(r,{slots:t}){const{parent:e,index:f}=Q(J);if(!e)return;const o=e.props,c=()=>{const p=+o.active;return f.value<p?"finish":f.value===p?"process":"waiting"},_=()=>c()==="process",g=E(()=>({background:c()==="finish"?o.activeColor:o.inactiveColor})),v=E(()=>{if(_())return{color:o.activeColor};if(c()==="waiting")return{color:o.inactiveColor}}),m=()=>e.onClickStep(f.value),k=()=>{const{iconPrefix:p,finishIcon:u,activeIcon:l,activeColor:d,inactiveIcon:s}=o;return _()?t["active-icon"]?t["active-icon"]():n(I,{class:y("icon","active"),name:l,color:d,classPrefix:p},null):c()==="finish"&&(u||t["finish-icon"])?t["finish-icon"]?t["finish-icon"]():n(I,{class:y("icon","finish"),name:u,color:d,classPrefix:p},null):t["inactive-icon"]?t["inactive-icon"]():s?n(I,{class:y("icon"),name:s,classPrefix:p},null):n("i",{class:y("circle"),style:g.value},null)};return()=>{var p;const u=c();return n("div",{class:[X,y([o.direction,{[u]:u}])]},[n("div",{class:y("title",{active:_()}),style:v.value,onClick:m},[(p=t.default)==null?void 0:p.call(t)]),n("div",{class:y("circle-container"),onClick:m},[k()]),n("div",{class:y("line"),style:g.value},null)])}}});const ve=j(fe);var me=ve;const ge=j(pe);var _e=ge;const he={form:{labelAlign:"left"},submitBtn:{show:!1},resetBtn:{show:!1}},be=[{text:"基本信息",desc:"填写个人基本信息"},{text:"详细信息",desc:"补充详细资料"},{text:"确认提交",desc:"检查并提交信息"}],ye=[{type:"input",field:"realName",title:"真实姓名",value:"张三",props:{placeholder:"请输入真实姓名",clearable:!0},validate:[{required:!0,message:"请输入真实姓名",trigger:"blur"}]},{type:"radio",field:"gender",title:"性别",value:"male",options:[{label:"男",value:"male"},{label:"女",value:"female"}],validate:[{required:!0,message:"请选择性别",trigger:"blur"}]},{type:"datePicker",field:"birthday",title:"出生日期",value:"2000-01-01",props:{placeholder:"请选择出生日期"},validate:[{required:!0,message:"请选择出生日期",trigger:"blur"}]},{type:"input",field:"phone",title:"手机号码",value:"13800138000",props:{placeholder:"请输入手机号码",clearable:!0},validate:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}]}],Se=[{type:"select",field:"education",title:"学历",value:"bachelor",options:[{text:"高中及以下",value:"high_school"},{text:"大专",value:"college"},{text:"本科",value:"bachelor"},{text:"硕士",value:"master"},{text:"博士",value:"doctor"}],props:{placeholder:"请选择学历"},validate:[{required:!0,message:"请选择学历",trigger:"blur"}]},{type:"cascader",field:"address",title:"居住地址",value:"shenzhen",options:[{text:"广东省",value:"guangdong",children:[{text:"深圳市",value:"shenzhen"},{text:"广州市",value:"guangzhou"},{text:"东莞市",value:"dongguan"}]},{text:"浙江省",value:"zhejiang",children:[{text:"杭州市",value:"hangzhou"},{text:"宁波市",value:"ningbo"},{text:"温州市",value:"wenzhou"}]}],props:{placeholder:"请选择居住地址"},validate:[{required:!0,message:"请选择居住地址",trigger:"blur"}]},{type:"checkbox",field:"skills",title:"技能特长",value:["frontend"],options:[{label:"前端开发",value:"frontend"},{label:"后端开发",value:"backend"},{label:"移动开发",value:"mobile"},{label:"数据分析",value:"data"},{label:"设计",value:"design"}],validate:[{required:!0,message:"请至少选择一项技能",trigger:"blur"}]},{type:"input",field:"introduction",title:"个人简介",value:"",props:{type:"textarea",rows:4,placeholder:"请简单介绍一下自己",clearable:!0,showWordLimit:!0,maxlength:200}}];function xe(r){const t=P(0),e=r.slice();function f(l){return D(this,null,function*(){(yield l(e[t.value],t.value))&&t.value<e.length-1&&(t.value++,U({message:"进入下一步",type:"success",position:"top",duration:1e3}))})}const o=()=>{t.value>0&&(t.value--,U({message:"返回上一步",type:"primary",position:"top",duration:1e3}))};function c(l,d){e[l].rules=P(d).value}function _(l){e[l].data=P({}).value}function g(l){e[l].api=P(null).value}function v(l,d){c(l,d),_(l),g(l)}function m(){const l=e[t.value];l.api&&ce(l.api)}function k(){e.forEach(l=>{l.api&&oe(l.api)})}const p=()=>e.map(l=>l.data).reduce((l,d)=>$($({},l),d),{}),u=()=>{const l=p();return JSON.stringify(l,null,2)};return{currentStep:ee(t),stepsData:e,nextStep:f,prevStep:o,registerSteps:v,handleReset:m,handleSubmit:k,formatDisplayData:u}}const ke=V({__name:"StepsForm",setup(r){const{currentStep:t,stepsData:e,nextStep:f,prevStep:o,registerSteps:c,handleReset:_,handleSubmit:g,formatDisplayData:v}=xe(be),m=he;c(0,ye),c(1,Se);function k(){return D(this,null,function*(){yield f((p,u)=>D(this,null,function*(){return new Promise(l=>{var d;(d=p.api)==null||d.validate().then(()=>{l(!0)}).catch(s=>{l(!1)})})}))})}return(p,u)=>{const l=me,d=_e,s=L,w=ie;return S(),x(s,{class:"steps-form"},{default:i(()=>[n(s,{class:"steps-header"},{default:i(()=>[n(d,{active:a(t),direction:"horizontal"},{default:i(()=>[(S(!0),te(le,null,ae(a(e),(h,K)=>(S(),x(l,{key:K},{default:i(()=>[b(C(h.text),1)]),_:2},1024))),128))]),_:1},8,["active"])]),_:1}),n(s,{class:"form-content"},{default:i(()=>[F(n(s,{class:"step-form"},{default:i(()=>[n(s,{class:"step-title"},{default:i(()=>[b(C(a(e)[0].text),1)]),_:1}),n(a(A),{modelValue:a(e)[0].data,"onUpdate:modelValue":u[0]||(u[0]=h=>a(e)[0].data=h),api:a(e)[0].api,"onUpdate:api":u[1]||(u[1]=h=>a(e)[0].api=h),rule:a(e)[0].rules,option:a(m)},null,8,["modelValue","api","rule","option"])]),_:1},512),[[N,a(t)===0]]),F(n(s,{class:"step-form"},{default:i(()=>[n(s,{class:"step-title"},{default:i(()=>[b(C(a(e)[1].text),1)]),_:1}),n(a(A),{modelValue:a(e)[1].data,"onUpdate:modelValue":u[2]||(u[2]=h=>a(e)[1].data=h),api:a(e)[1].api,"onUpdate:api":u[3]||(u[3]=h=>a(e)[1].api=h),rule:a(e)[1].rules,option:a(m)},null,8,["modelValue","api","rule","option"])]),_:1},512),[[N,a(t)===1]]),F(n(s,{class:"step-form"},{default:i(()=>[n(s,{class:"step-title"},{default:i(()=>[b(C(a(e)[2].text),1)]),_:1}),n(s,{class:"confirm-content"},{default:i(()=>[n(s,{class:"data-preview"},{default:i(()=>[n(s,{class:"preview-title"},{default:i(()=>[b(" 请确认您填写的信息： ")]),_:1}),n(s,{class:"data-display"},{default:i(()=>[ne("pre",{class:"data-json"},C(a(v)()),1)]),_:1})]),_:1})]),_:1})]),_:1},512),[[N,a(t)===2]])]),_:1}),n(s,{class:"form-actions"},{default:i(()=>[n(s,{class:"action-buttons"},{default:i(()=>[a(t)>0?(S(),x(w,{key:0,type:"default",size:"large",class:"action-btn",onClick:a(o)},{default:i(()=>[b(" 上一步 ")]),_:1},8,["onClick"])):z("",!0),a(t)<a(e).length-1?(S(),x(w,{key:1,type:"primary",size:"large",class:"action-btn",onClick:k},{default:i(()=>[b(" 下一步 ")]),_:1})):z("",!0),a(t)===a(e).length-1?(S(),x(w,{key:2,type:"primary",size:"large",class:"action-btn",onClick:a(g)},{default:i(()=>[b(" 提交表单 ")]),_:1},8,["onClick"])):z("",!0)]),_:1}),a(t)!==a(e).length-1?(S(),x(w,{key:0,type:"warning",size:"large",plain:"",class:"reset-btn",onClick:a(_)},{default:i(()=>[b(" 重置当前步骤表单 ")]),_:1},8,["onClick"])):z("",!0)]),_:1})]),_:1})}}}),Ce=se(ke,[["__scopeId","data-v-816928be"]]),ze=V({__name:"steps-form",setup(r){return(t,e)=>{const f=L,o=re("layout-default-uni");return S(),x(o,null,{default:i(()=>[n(f,{style:{height:"calc(100vh - var(--window-top))"}},{default:i(()=>[n(Ce)]),_:1})]),_:1})}}});export{ze as default};
