var W=Object.defineProperty;var q=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var B=(i,t,e)=>t in i?W(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,F=(i,t)=>{for(var e in t||(t={}))Z.call(t,e)&&B(i,e,t[e]);if(q)for(var e of q(t))G.call(t,e)&&B(i,e,t[e]);return i};var P=(i,t,e)=>new Promise((p,c)=>{var u=d=>{try{v(e.next(d))}catch(f){c(f)}},m=d=>{try{v(e.throw(d))}catch(f){c(f)}},v=d=>d.done?p(d.value):Promise.resolve(d.value).then(u,m);v((e=e.apply(i,t)).next())});import{d as z,Z as E,$ as H,a0 as j,a1 as Q,h as n,a2 as X,E as U,a3 as ee,a4 as I,a5 as L,r as V,a6 as te,U as A,c as x,f as b,i as Y,w as s,u as l,s as ae,a7 as le,k as _,t as w,F as ne,a8 as N,a9 as R,Y as O,q as ie,B as $,T as se,C as re,a as oe}from"./index-DX84Q2sv.js";import{a as ce,h as ue}from"./handle.BVeu8p2o.js";const[J,T]=j("steps"),pe={active:H(0),direction:E("horizontal"),activeIcon:E("checked"),iconPrefix:String,finishIcon:String,activeColor:String,inactiveIcon:String,inactiveColor:String},K=Symbol(J);var de=z({name:J,props:pe,emits:["clickStep"],setup(i,{emit:t,slots:e}){const{linkChildren:p}=Q(K);return p({props:i,onClickStep:u=>t("clickStep",u)}),()=>{var u;return n("div",{class:T([i.direction])},[n("div",{class:T("items")},[(u=e.default)==null?void 0:u.call(e)])])}}});const[fe,y]=j("step");var ve=z({name:fe,setup(i,{slots:t}){const{parent:e,index:p}=X(K);if(!e)return;const c=e.props,u=()=>{const a=+c.active;return p.value<a?"finish":p.value===a?"process":"waiting"},m=()=>u()==="process",v=U(()=>({background:u()==="finish"?c.activeColor:c.inactiveColor})),d=U(()=>{if(m())return{color:c.activeColor};if(u()==="waiting")return{color:c.inactiveColor}}),f=()=>e.onClickStep(p.value),C=()=>{const{iconPrefix:a,finishIcon:r,activeIcon:k,activeColor:S,inactiveIcon:o}=c;return m()?t["active-icon"]?t["active-icon"]():n(I,{class:y("icon","active"),name:k,color:S,classPrefix:a},null):u()==="finish"&&(r||t["finish-icon"])?t["finish-icon"]?t["finish-icon"]():n(I,{class:y("icon","finish"),name:r,color:S,classPrefix:a},null):t["inactive-icon"]?t["inactive-icon"]():o?n(I,{class:y("icon"),name:o,classPrefix:a},null):n("i",{class:y("circle"),style:v.value},null)};return()=>{var a;const r=u();return n("div",{class:[ee,y([c.direction,{[r]:r}])]},[n("div",{class:y("title",{active:m()}),style:d.value,onClick:f},[(a=t.default)==null?void 0:a.call(t)]),n("div",{class:y("circle-container"),onClick:f},[C()]),n("div",{class:y("line"),style:v.value},null)])}}});const me=L(ve);var ge=me;const _e=L(de);var he=_e;const ye={form:{labelAlign:"left"},submitBtn:{show:!1},resetBtn:{show:!1}},h=[{text:"基本信息",desc:"填写个人基本信息"},{text:"详细信息",desc:"补充详细资料"},{text:"确认提交",desc:"检查并提交信息"}],be=[{type:"input",field:"realName",title:"真实姓名",value:"",props:{placeholder:"请输入真实姓名",clearable:!0},validate:[{required:!0,message:"请输入真实姓名",trigger:"blur"}]},{type:"radio",field:"gender",title:"性别",value:"",options:[{label:"男",value:"male"},{label:"女",value:"female"}],validate:[{required:!0,message:"请选择性别",trigger:"blur"}]},{type:"datePicker",field:"birthday",title:"出生日期",value:"",props:{placeholder:"请选择出生日期"},validate:[{required:!0,message:"请选择出生日期",trigger:"blur"}]},{type:"input",field:"phone",title:"手机号码",value:"",props:{placeholder:"请输入手机号码",clearable:!0},validate:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}]}],Se=[{type:"select",field:"education",title:"学历",value:"",options:[{text:"高中及以下",value:"high_school"},{text:"大专",value:"college"},{text:"本科",value:"bachelor"},{text:"硕士",value:"master"},{text:"博士",value:"doctor"}],props:{placeholder:"请选择学历"},validate:[{required:!0,message:"请选择学历",trigger:"blur"}]},{type:"cascader",field:"address",title:"居住地址",value:"",options:[{text:"广东省",value:"guangdong",children:[{text:"深圳市",value:"shenzhen"},{text:"广州市",value:"guangzhou"},{text:"东莞市",value:"dongguan"}]},{text:"浙江省",value:"zhejiang",children:[{text:"杭州市",value:"hangzhou"},{text:"宁波市",value:"ningbo"},{text:"温州市",value:"wenzhou"}]}],props:{placeholder:"请选择居住地址"},validate:[{required:!0,message:"请选择居住地址",trigger:"blur"}]},{type:"checkbox",field:"skills",title:"技能特长",value:[],options:[{label:"前端开发",value:"frontend"},{label:"后端开发",value:"backend"},{label:"移动开发",value:"mobile"},{label:"数据分析",value:"data"},{label:"设计",value:"design"}],validate:[{required:!0,message:"请至少选择一项技能",trigger:"blur"}]},{type:"input",field:"introduction",title:"个人简介",value:"",props:{type:"textarea",rows:4,placeholder:"请简单介绍一下自己",clearable:!0,showWordLimit:!0,maxlength:200}}];function xe(){const i=V(0);function t(a){return P(this,null,function*(){(yield a(h[i.value],i.value))&&i.value<h.length-1&&(i.value++,A({message:"进入下一步",type:"success",position:"top",duration:1e3}))})}const e=()=>{i.value>0&&(i.value--,A({message:"返回上一步",type:"primary",position:"top",duration:1e3}))};function p(a,r){h[a].rules=V(r).value}function c(a){h[a].data=V({}).value}function u(a){h[a].api=V(null).value}function m(a,r){p(a,r),c(a),u(a)}function v(){const a=h[i.value];a.api&&ue(a.api)}function d(){h.forEach(a=>{a.api&&ce(a.api)})}const f=()=>h.map(a=>a.data).reduce((a,r)=>F(F({},a),r),{}),C=()=>{const a=f();return JSON.stringify(a,null,2)};return{currentStep:te(i),stepsData:h,nextStep:t,prevStep:e,registerSteps:m,handleReset:v,handleSubmit:d,formatDisplayData:C}}const ke=z({__name:"StepsForm",setup(i){const{currentStep:t,stepsData:e,nextStep:p,prevStep:c,registerSteps:u,handleReset:m,handleSubmit:v,formatDisplayData:d}=xe(),f=ye;u(0,be),u(1,Se);function C(){return P(this,null,function*(){yield p((a,r)=>P(this,null,function*(){return new Promise(k=>{var S;(S=a.api)==null||S.validate().then(()=>{k(!0)}).catch(o=>{k(!1)})})}))})}return(a,r)=>{const k=ge,S=he,o=Y,D=se;return b(),x(o,{class:"steps-form"},{default:s(()=>[n(o,{class:"steps-header"},{default:s(()=>[n(S,{active:l(t),direction:"horizontal"},{default:s(()=>[(b(!0),ae(ne,null,le(l(e),(g,M)=>(b(),x(k,{key:M},{default:s(()=>[_(w(g.text),1)]),_:2},1024))),128))]),_:1},8,["active"])]),_:1}),n(o,{class:"form-content"},{default:s(()=>[N(n(o,{class:"step-form"},{default:s(()=>[n(o,{class:"step-title"},{default:s(()=>[_(w(l(e)[0].text),1)]),_:1}),n(l(O),{modelValue:l(e)[0].data,"onUpdate:modelValue":r[0]||(r[0]=g=>l(e)[0].data=g),api:l(e)[0].api,"onUpdate:api":r[1]||(r[1]=g=>l(e)[0].api=g),rule:l(e)[0].rules,option:l(f)},null,8,["modelValue","api","rule","option"])]),_:1},512),[[R,l(t)===0]]),N(n(o,{class:"step-form"},{default:s(()=>[n(o,{class:"step-title"},{default:s(()=>[_(w(l(e)[1].text),1)]),_:1}),n(l(O),{modelValue:l(e)[1].data,"onUpdate:modelValue":r[2]||(r[2]=g=>l(e)[1].data=g),api:l(e)[1].api,"onUpdate:api":r[3]||(r[3]=g=>l(e)[1].api=g),rule:l(e)[1].rules,option:l(f)},null,8,["modelValue","api","rule","option"])]),_:1},512),[[R,l(t)===1]]),N(n(o,{class:"step-form"},{default:s(()=>[n(o,{class:"step-title"},{default:s(()=>[_(w(l(e)[2].text),1)]),_:1}),n(o,{class:"confirm-content"},{default:s(()=>[n(o,{class:"data-preview"},{default:s(()=>[n(o,{class:"preview-title"},{default:s(()=>[_(" 请确认您填写的信息： ")]),_:1}),n(o,{class:"data-display"},{default:s(()=>[ie("pre",{class:"data-json"},w(l(d)()),1)]),_:1})]),_:1})]),_:1})]),_:1},512),[[R,l(t)===2]])]),_:1}),n(o,{class:"form-actions"},{default:s(()=>[n(o,{class:"action-buttons"},{default:s(()=>[l(t)>0?(b(),x(D,{key:0,type:"default",size:"large",class:"action-btn",onClick:l(c)},{default:s(()=>[_(" 上一步 ")]),_:1},8,["onClick"])):$("",!0),l(t)<l(e).length-1?(b(),x(D,{key:1,type:"primary",size:"large",class:"action-btn",onClick:C},{default:s(()=>[_(" 下一步 ")]),_:1})):$("",!0),l(t)===l(e).length-1?(b(),x(D,{key:2,type:"primary",size:"large",class:"action-btn",onClick:l(v)},{default:s(()=>[_(" 提交表单 ")]),_:1},8,["onClick"])):$("",!0)]),_:1}),l(t)!==l(e).length-1?(b(),x(D,{key:0,type:"warning",size:"large",plain:"",class:"reset-btn",onClick:l(m)},{default:s(()=>[_(" 重置当前步骤表单 ")]),_:1},8,["onClick"])):$("",!0)]),_:1})]),_:1})}}}),Ce=re(ke,[["__scopeId","data-v-b6592d2c"]]),Ve=z({__name:"steps-form",setup(i){return(t,e)=>{const p=Y,c=oe("layout-default-uni");return b(),x(c,null,{default:s(()=>[n(p,{style:{height:"calc(100vh - var(--window-top))"}},{default:s(()=>[n(Ce)]),_:1})]),_:1})}}});export{Ve as default};
